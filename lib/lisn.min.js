(function(){var e,t,n,r=[].slice;e={},e.eventSplitter=/\s/,e.on=function(e,t,n){var r,i,s,o,u,a,f,l;(u=this._events)==null&&(this._events={}),a=e.split(this.eventSplitter),l=[];for(s=0,o=a.length;s<o;s++)r=a[s],l.push(((f=(i=this._events)[r])!=null?f:i[r]=[]).push({callback:t,context:n}));return l},e.bind=e.on,t=function(e,t,n){return(t===void 0||e.callback._fn&&e.callback._fn===t||e.callback===t)&&(n===void 0||e.context===n)},n=function(e,n,r){var i,s,o,u;u=[];for(s=0,o=e.length;s<o;s++)i=e[s],t(i,n,r)?u.push(i):u.push(void 0);return u},e.off=function(e,t,r){var i,s,o,u,a,f,l,c;l=e.split(this.eventSplitter),c=[];for(a=0,f=l.length;a<f;a++)s=l[a],i=this._events[s],c.push(function(){var e,s,a,f;a=n(i,t,r),f=[];for(e=0,s=a.length;e<s;e++)u=a[e],(o=i.indexOf(u))!==-1?f.push(i.splice(o,1)):f.push(void 0);return f}());return c},e.unbind=e.off,e.trigger=function(){var e,t,n,i,s,o,u,a,f,l,c,h,p,d,v;i=arguments[0],e=2<=arguments.length?r.call(arguments,1):[];if(!this._events)return;u=[],d=[i,"all"];for(a=0,c=d.length;a<c;a++){s=d[a];if(n=this._events[s])for(f=0,h=n.length;f<h;f++)t=n[f],u.push(t)}v=[];for(l=0,p=u.length;l<p;l++)o=u[l],v.push(o.callback.apply(o.context,e));return v},e.once=function(e,t,n){var r,i;return i=this,r=function(){return i.off(e,r),t.apply(this,arguments)},r._fn=t,this.on(e,r,n)},e.listenTo=function(e,t,n){var r,i,s,o,u;return(s=this._listeners)==null&&(this._listeners={}),(o=(r=this._listeners)[e])==null&&(r[e]={}),(u=(i=this._listeners[e])[t])==null&&(i[t]=[]),this._listeners[e][t].push({event:t,callback:n}),e.on(t,n,this)},e.stopListening=function(e,t,n){var r,i,s,o,u,a,f,l,c,h;if(!this._listeners)return;if(e){if(t){if(n)return e.off(t,n,this);u=this._listeners[e][t],l=[];for(s=0,o=u.length;s<o;s++)n=u[s],l.push(this.stopListening(e,t,n));return l}a=this._listeners[e],c=[];for(t in a)r=a[t],c.push(this.stopListening(e,t));return c}f=this._listeners,h=[];for(e in f)i=f[e],h.push(this.stopListening(e));return h},typeof window!="undefined"&&window!==null?window.Lisn=e:module.exports=e}).call(this);